{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/Susan/Desktop/covidata/my-app/src/AnimatedPieHooks.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\n\nconst Pie = props => {\n  _s();\n\n  const ref = useRef(null);\n  const cache = useRef(props.data);\n  const createPie = d3.pie().value(d => d.value).sort(null);\n  const createArc = d3.arc().innerRadius(props.innerRadius).outerRadius(props.outerRadius);\n  const colors = d3.scaleOrdinal(d3.schemeCategory10);\n  const format = d3.format(\".2f\");\n  useEffect(() => {\n    const data = createPie(props.data);\n    const prevData = createPie(cache.current);\n    const group = d3.select(ref.current);\n    const groupWithData = group.selectAll(\"g.arc\").data(data);\n    groupWithData.exit().remove();\n    const groupWithUpdate = groupWithData.enter().append(\"g\").attr(\"class\", \"arc\");\n    const path = groupWithUpdate.append(\"path\").merge(groupWithData.select(\"path.arc\"));\n\n    const arcTween = (d, i) => {\n      const interpolator = d3.interpolate(prevData[i], d);\n      return t => createArc(interpolator(t));\n    };\n\n    path.attr(\"class\", \"arc\").attr(\"fill\", (d, i) => colors(i)).transition().attrTween(\"d\", arcTween);\n    const text = groupWithUpdate.append(\"text\").merge(groupWithData.select(\"text\"));\n    text.attr(\"text-anchor\", \"middle\").attr(\"alignment-baseline\", \"middle\").style(\"fill\", \"white\").style(\"font-size\", 10).transition().attr(\"transform\", d => `translate(${createArc.centroid(d)})`).tween(\"text\", (d, i, nodes) => {\n      const interpolator = d3.interpolate(prevData[i], d);\n      return t => d3.select(nodes[i]).text(format(interpolator(t).value));\n    });\n    cache.current = props.data;\n  }, [props.data]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: props.width,\n    height: props.height,\n    children: /*#__PURE__*/_jsxDEV(\"g\", {\n      ref: ref,\n      transform: `translate(${props.outerRadius} ${props.outerRadius})`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Pie, \"MmPCtGo/I6HdvmXfA/do21yyKOc=\");\n\n_c = Pie;\nexport default Pie;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pie\");","map":{"version":3,"sources":["/Users/Susan/Desktop/covidata/my-app/src/AnimatedPieHooks.js"],"names":["React","useEffect","useRef","d3","Pie","props","ref","cache","data","createPie","pie","value","d","sort","createArc","arc","innerRadius","outerRadius","colors","scaleOrdinal","schemeCategory10","format","prevData","current","group","select","groupWithData","selectAll","exit","remove","groupWithUpdate","enter","append","attr","path","merge","arcTween","i","interpolator","interpolate","t","transition","attrTween","text","style","centroid","tween","nodes","width","height"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\n\nconst Pie = props => {\n  const ref = useRef(null);\n  const cache = useRef(props.data);\n  const createPie = d3\n    .pie()\n    .value(d => d.value)\n    .sort(null);\n  const createArc = d3\n    .arc()\n    .innerRadius(props.innerRadius)\n    .outerRadius(props.outerRadius);\n  const colors = d3.scaleOrdinal(d3.schemeCategory10);\n  const format = d3.format(\".2f\");\n\n  useEffect(\n    () => {\n      const data = createPie(props.data);\n      const prevData = createPie(cache.current);\n      const group = d3.select(ref.current);\n      const groupWithData = group.selectAll(\"g.arc\").data(data);\n\n      groupWithData.exit().remove();\n\n      const groupWithUpdate = groupWithData\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"arc\");\n\n      const path = groupWithUpdate\n        .append(\"path\")\n        .merge(groupWithData.select(\"path.arc\"));\n\n      const arcTween = (d, i) => {\n        const interpolator = d3.interpolate(prevData[i], d);\n\n        return t => createArc(interpolator(t));\n      };\n\n      path\n        .attr(\"class\", \"arc\")\n        .attr(\"fill\", (d, i) => colors(i))\n        .transition()\n        .attrTween(\"d\", arcTween);\n\n      const text = groupWithUpdate\n        .append(\"text\")\n        .merge(groupWithData.select(\"text\"));\n\n      text\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"alignment-baseline\", \"middle\")\n        .style(\"fill\", \"white\")\n        .style(\"font-size\", 10)\n        .transition()\n        .attr(\"transform\", d => `translate(${createArc.centroid(d)})`)\n        .tween(\"text\", (d, i, nodes) => {\n          const interpolator = d3.interpolate(prevData[i], d);\n\n          return t => d3.select(nodes[i]).text(format(interpolator(t).value));\n        });\n\n      cache.current = props.data;\n    },\n    [props.data]\n  );\n\n  return (\n    <svg width={props.width} height={props.height}>\n      <g\n        ref={ref}\n        transform={`translate(${props.outerRadius} ${props.outerRadius})`}\n      />\n    </svg>\n  );\n};\n\nexport default Pie;\n"]},"metadata":{},"sourceType":"module"}